// @flow
import * as React from "react";
import cx from "classnames";
import Text from "@casumo/cmp-text";
import "./WinsInARowBooster.scss";

type Props = {
  className?: string,
  winsInARow: number,
};

const classNamePrefix = "c-rr-booster--wins-in-a-row";
let cmpId = 0; // eslint-disable-line fp/no-let

function getCmpId() {
  return cmpId++; // eslint-disable-line fp/no-mutation
}

function getArcClassName(winsInARow: number, ellipsisNo: number): string {
  return cx(
    `${classNamePrefix}__arc`,
    winsInARow < ellipsisNo ? "t-color-black t-opacity--25" : "t-color-teal-50"
  );
}

export function WinsInARowBooster({ className, winsInARow }: Props) {
  const isTriple = winsInARow === 3;
  const instanceId = getCmpId();

  return (
    <div className={className}>
      <svg viewBox="0 0 59 59" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle
          cx={29.5}
          cy={28}
          fill="currentColor"
          className={cx(
            "t-color-teal-50",
            `${classNamePrefix}__circle`,
            isTriple && `${classNamePrefix}__circle--tripled`
          )}
          r={28}
        />
        <mask id={`mask-${instanceId}-0`} fill="white">
          <path d="M52.8324 29.2846C53.67 17.2149 45.2003 6.65521 33.5798 4.7418C32.4076 4.54879 31.5098 3.53082 31.5921 2.34582C31.6743 1.16083 32.7055 0.259259 33.8804 0.435166C47.8543 2.52744 58.0933 15.1442 57.0912 29.5847C56.8618 32.8899 56.0624 36.0179 54.7966 38.8781C54.2838 40.0368 52.8439 40.3799 51.7932 39.6698C50.8804 39.0529 50.5893 37.8514 51.0211 36.8389C52.0169 34.5039 52.6465 31.9632 52.8324 29.2846Z" />
        </mask>
        <path
          fill="currentColor"
          className={getArcClassName(winsInARow, 1)}
          mask={`url(#mask-${instanceId}-0)`}
          d="M33.5798 4.7418L34.3869 -0.192125L33.5798 4.7418ZM33.8804 0.435166L34.6156 -4.51008L33.8804 0.435166ZM51.0211 36.8389L46.422 34.8729L51.0211 36.8389ZM54.7966 38.8781L50.2245 36.8501L50.2245 36.8501L54.7966 38.8781ZM51.7932 39.6698L48.9969 43.812L48.9969 43.812L51.7932 39.6698ZM32.7726 9.67573C41.8388 11.1685 48.5041 19.4324 47.8448 28.9332L57.82 29.636C58.8359 14.9974 48.5617 2.14187 34.3869 -0.192125L32.7726 9.67573ZM33.1452 5.38041C44.5271 7.08458 52.9257 17.3854 52.1035 29.2333L62.0788 29.9361C63.2608 12.9031 51.1815 -2.0297 34.6156 -4.51008L33.1452 5.38041ZM47.8448 28.9332C47.698 31.0485 47.202 33.0441 46.422 34.8729L55.6201 38.8049C56.8318 35.9638 57.595 32.8779 57.82 29.636L47.8448 28.9332ZM52.1035 29.2333C51.9149 31.9518 51.2588 34.5131 50.2245 36.8501L59.3688 40.906C60.8661 37.5227 61.8087 33.828 62.0788 29.9361L52.1035 29.2333ZM50.2245 36.8501C51.0932 34.8872 53.315 34.6663 54.5894 35.5276L48.9969 43.812C52.3727 46.0935 57.4744 45.1864 59.3688 40.906L50.2245 36.8501ZM46.422 34.8729C45.1512 37.8527 45.8922 41.7138 48.9969 43.812L54.5894 35.5276C55.8686 36.3921 56.0273 37.8501 55.6201 38.8049L46.422 34.8729ZM34.6156 -4.51008C30.3036 -5.15569 26.8703 -1.83722 26.6044 1.99439L36.5797 2.69725C36.4783 4.15887 35.1075 5.67421 33.1452 5.38041L34.6156 -4.51008ZM34.3869 -0.192125C35.4679 -0.0141333 36.6961 1.01928 36.5797 2.69725L26.6044 1.99439C26.3235 6.04236 29.3473 9.11172 32.7726 9.67573L34.3869 -0.192125Z"
        />
        <mask id={`mask-${instanceId}-1`} fill="white">
          <path d="M6.16663 29.2846C5.32903 17.2149 13.7988 6.65521 25.4193 4.7418C26.5915 4.54879 27.4892 3.53082 27.407 2.34582C27.3247 1.16083 26.2935 0.259259 25.1186 0.435166C11.1447 2.52744 0.905729 15.1442 1.90786 29.5847C2.13724 32.8899 2.93659 36.0179 4.20238 38.8781C4.7152 40.0368 6.15517 40.3799 7.20586 39.6698C8.1186 39.0529 8.40977 37.8514 7.97794 36.8389C6.9821 34.5039 6.35252 31.9632 6.16663 29.2846Z" />
        </mask>
        <path
          fill="currentColor"
          className={getArcClassName(winsInARow, 3)}
          mask={`url(#mask-${instanceId}-1)`}
          d="M25.4193 4.7418L24.6121 -0.192125L25.4193 4.7418ZM25.1186 0.435166L24.3835 -4.51008L25.1186 0.435166ZM7.97794 36.8389L12.577 34.8729L7.97794 36.8389ZM4.20238 38.8781L8.77452 36.8501L8.77453 36.8501L4.20238 38.8781ZM7.20586 39.6698L10.0021 43.812L10.0021 43.812L7.20586 39.6698ZM26.2264 9.67573C17.1602 11.1685 10.4949 19.4324 11.1543 28.9332L1.179 29.636C0.163114 14.9974 10.4373 2.14187 24.6121 -0.192125L26.2264 9.67573ZM25.8538 5.38041C14.4719 7.08458 6.07328 17.3854 6.8955 29.2333L-3.07977 29.9361C-4.26182 12.9031 7.81754 -2.0297 24.3835 -4.51008L25.8538 5.38041ZM11.1543 28.9332C11.3011 31.0485 11.797 33.0441 12.577 34.8729L3.37888 38.8049C2.1672 35.9638 1.40398 32.8779 1.179 29.636L11.1543 28.9332ZM6.8955 29.2333C7.08416 31.9518 7.74025 34.5131 8.77452 36.8501L-0.369759 40.906C-1.86707 37.5227 -2.80969 33.828 -3.07977 29.9361L6.8955 29.2333ZM8.77453 36.8501C7.90579 34.8872 5.68402 34.6663 4.4096 35.5276L10.0021 43.812C6.62631 46.0935 1.52461 45.1864 -0.369761 40.906L8.77453 36.8501ZM12.577 34.8729C13.8479 37.8527 13.1068 41.7138 10.0021 43.812L4.4096 35.5276C3.13041 36.3921 2.97168 37.8501 3.37888 38.8049L12.577 34.8729ZM24.3835 -4.51008C28.6954 -5.15569 32.1287 -1.83722 32.3946 1.99439L22.4193 2.69725C22.5208 4.15887 23.8916 5.67421 25.8538 5.38041L24.3835 -4.51008ZM24.6121 -0.192125C23.5312 -0.0141333 22.3029 1.01928 22.4193 2.69725L32.3946 1.99439C32.6755 6.04236 29.6518 9.11172 26.2264 9.67573L24.6121 -0.192125Z"
        />
        <mask id={`mask-${instanceId}-2`} fill="white">
          <path d="M16.7016 47.3805C26.7089 54.0808 40.0152 51.8698 47.4038 42.6195C48.1408 41.6968 49.4573 41.4218 50.4392 42.0792C51.4211 42.7366 51.695 44.0769 50.9712 45.0101C42.266 56.2339 26.3107 58.979 14.3389 50.9634C11.5992 49.1291 9.2943 46.8827 7.45129 44.3598C6.7036 43.3363 7.11131 41.915 8.23751 41.3481C9.2277 40.8496 10.4255 41.1966 11.0963 42.0865C12.6159 44.1024 14.491 45.9005 16.7016 47.3805Z" />
        </mask>
        <path
          fill="currentColor"
          className={getArcClassName(winsInARow, 2)}
          mask={`url(#mask-${instanceId}-2)`}
          d="M47.4038 42.6195L43.5162 39.4702L43.5162 39.4702L47.4038 42.6195ZM50.9712 45.0101L54.9029 48.1034L50.9712 45.0101ZM11.0963 42.0865L7.12881 45.1114L7.12881 45.1114L11.0963 42.0865ZM7.45129 44.3598L3.43879 47.324L7.45129 44.3598ZM8.23751 41.3481L5.9984 36.8606L5.99839 36.8606L8.23751 41.3481ZM43.5162 39.4702C37.7178 46.7296 27.2834 48.4484 19.4542 43.2064L13.949 51.5546C26.1344 59.7132 42.3126 57.01 51.2914 45.7689L43.5162 39.4702ZM47.0395 41.9168C39.9147 51.1029 26.8651 53.3331 17.0915 46.7893L11.5863 55.1375C25.7563 64.6249 44.6172 61.365 54.9029 48.1034L47.0395 41.9168ZM19.4542 43.2064C17.716 42.0426 16.2498 40.635 15.0638 39.0615L7.12881 45.1114C8.98198 47.5698 11.266 49.7583 13.949 51.5546L19.4542 43.2064ZM17.0915 46.7893C14.846 45.2859 12.9655 43.4512 11.4638 41.3955L3.43879 47.324C5.6231 50.3141 8.35242 52.9723 11.5863 55.1375L17.0915 46.7893ZM11.4638 41.3955C12.7259 43.1232 11.8331 45.1527 10.4766 45.8355L5.99839 36.8606C2.3895 38.6774 0.681342 43.5494 3.43879 47.324L11.4638 41.3955ZM15.0638 39.0615C13.0991 36.4552 9.35986 35.1684 5.9984 36.8606L10.4766 45.8355C9.09555 46.5308 7.75189 45.938 7.12881 45.1114L15.0638 39.0615ZM54.9029 48.1034C57.5641 44.6722 56.3804 40.04 53.1917 37.905L47.6866 46.2533C46.4617 45.4332 45.8259 43.4815 47.0395 41.9168L54.9029 48.1034ZM51.2914 45.7689C50.5984 46.6364 49.088 47.1916 47.6866 46.2533L53.1917 37.905C49.8265 35.6519 45.6831 36.7573 43.5162 39.4702L51.2914 45.7689Z"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M32.9654 29.3449H30.4972H30.3969C30.2635 29.4094 30.1436 29.4967 30.043 29.6012C29.9158 29.7333 29.8197 29.893 29.7665 30.0686C29.7361 30.1691 29.7198 30.2748 29.7198 30.3836C29.7198 30.3948 29.72 30.4061 29.7203 30.4173C29.7396 31.0361 30.2856 31.5462 30.9379 31.5462H31.408H31.6892H32.1569C32.3218 31.5462 32.4799 31.5788 32.6243 31.6375C33.0619 31.8152 33.375 32.2323 33.375 32.7089C33.375 33.1334 33.1273 33.5105 32.7646 33.7138C32.5849 33.8145 32.377 33.8725 32.1569 33.8725H31.6893H30.9379C30.5604 33.8725 30.1962 33.8169 29.8537 33.7138C28.7841 33.3918 27.9263 32.6067 27.5404 31.6066C27.3973 31.2355 27.3191 30.8349 27.3191 30.4173L27.3192 30.3836C27.3231 30.0371 27.3858 29.6906 27.5074 29.3449H25.9245L25.6661 29.3743C25.181 29.4296 24.7307 29.5756 24.3297 29.7928L23.5816 30.1981C22.9034 30.8263 22.4812 31.7049 22.4812 32.6751C22.4812 34.5798 24.1056 36.1303 26.101 36.1303H29.5342H30.9379H32.1569H33.2347H33.3386C35.333 36.1303 36.9585 34.5798 36.9585 32.6751C36.9585 31.637 36.4751 30.704 35.7122 30.0701L34.9169 29.6983C34.4642 29.4866 33.96 29.3626 33.4178 29.3513L32.9654 29.3418V29.3449ZM38.2216 29.1694C38.9755 30.1409 39.4267 31.3496 39.4267 32.6751C39.4267 35.9723 36.6363 38.5469 33.3386 38.5469H26.101C22.8018 38.5469 20.0129 35.9719 20.0129 32.6751C20.0129 31.4999 20.3676 30.4165 20.9734 29.5088L20.7086 28.1226L19.6604 22.636C19.4227 21.6014 19.7226 20.5918 20.2691 19.8613L25.3321 19.0249C25.461 19.1127 25.5803 19.2057 25.6906 19.3029C26.0808 17.6942 27.5878 16.5469 29.2791 16.5469C30.8929 16.5469 32.339 17.5914 32.8071 19.0847C33.6074 18.0523 34.9505 17.5069 36.2896 17.6951C37.402 17.8318 38.2234 18.4454 38.7285 19.1224C39.3106 19.901 39.5405 20.8487 39.3542 21.8386L38.421 27.879L38.2216 29.1694ZM35.9991 27.397C35.2345 27.0374 34.3844 26.8282 33.4944 26.8063L33.9132 24.536L34.1073 23.4842L34.4967 21.373L34.5511 21.0786L34.5577 21.0427C34.5626 21.0142 34.5686 20.9861 34.5756 20.9585C34.7244 20.3709 35.3264 19.9899 35.9607 20.0904C36.2923 20.1251 36.5521 20.3017 36.736 20.5487C36.921 20.7957 36.9948 21.0774 36.921 21.4296L36.9201 21.4356L36.9164 21.4598L36.8582 21.8362L36.5425 23.8797L36.3613 25.0525L35.9991 27.397ZM25.3321 19.0249C24.5639 18.5004 23.5261 18.2363 22.4826 18.4763C21.7222 18.6432 20.8853 19.0382 20.2702 19.8598L25.3321 19.0249ZM30.437 26.8381C30.457 26.8354 30.4771 26.8328 30.4972 26.8305V24.5118V20.4192V20.1261C30.4972 19.4922 29.9432 18.9634 29.2791 18.9634C28.615 18.9634 28.0611 19.4922 28.0611 20.1261V20.4192V24.5118V26.8044H28.5693V26.8381H30.437ZM22.0998 22.2609L22.1766 22.6626L22.6641 25.2143L23.0792 27.3873L23.1128 27.5632C23.7944 27.1918 24.5545 26.9439 25.3572 26.8484L24.9347 24.5934L24.4859 22.1977L24.4017 21.748C24.3988 21.7355 24.3957 21.723 24.3926 21.7107C24.379 21.6575 24.3632 21.6063 24.345 21.5572C24.261 21.3299 24.1259 21.1467 23.9216 21.008C23.6638 20.8314 23.3312 20.76 23.0361 20.8314C22.7035 20.9018 22.4447 21.0427 22.2608 21.2887C22.0758 21.5357 22.0009 21.8532 22.0758 22.1349L22.0815 22.1647L22.0998 22.2609Z"
          fill="white"
        />
      </svg>
      <Text
        className={cx(
          `${classNamePrefix}__points`,
          isTriple
            ? `t-color-white ${classNamePrefix}__points--tripled`
            : "t-color-grey-50",
          "u-text-align-center u-font-weight-bold"
        )}
      >
        +5
      </Text>
    </div>
  );
}
